<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Swagger UI</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/swagger-ui-dist@3/swagger-ui.css"
    />
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@3/swagger-ui-bundle.js"></script>
    <script>
      const apiResponse = {
        api: '```json\n{\n  "swagger": "2.0",\n  "info": {\n    "title": "게시판 시스템 API",\n    "description": "게시글 및 댓글 관리를 위한 API",\n    "version": "1.0.0"\n  },\n  "basePath": "/api",\n  "schemes": [\n    "http"\n  ],\n  "consumes": [\n    "application/json"\n  ],\n  "produces": [\n    "application/json"\n  ],\n  "paths": {\n    "/posts": {\n      "post": {\n        "summary": "새 게시글 작성",\n        "description": "사용자가 새 게시글을 작성합니다.",\n        "parameters": [\n          {\n            "name": "post",\n            "in": "body",\n            "required": true,\n            "schema": {\n              "$ref": "#/definitions/PostInput"\n            }\n          }\n        ],\n        "responses": {\n          "201": {\n            "description": "게시글 작성 성공",\n            "schema": {\n              "$ref": "#/definitions/PostOutput"\n            }\n          }\n        }\n      },\n      "get": {\n        "summary": "게시글 목록 조회",\n        "description": "모든 게시글 목록을 조회합니다.",\n        "responses": {\n          "200": {\n            "description": "게시글 목록 조회 성공",\n            "schema": {\n              "type": "array",\n              "items": {\n                "$ref": "#/definitions/PostOutput"\n              }\n            }\n          }\n        }\n      }\n    },\n    "/posts/{postId}": {\n      "get": {\n        "summary": "특정 게시글 상세 조회",\n        "description": "특정 게시글의 상세 내용을 조회합니다.",\n        "parameters": [\n          {\n            "name": "postId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "게시글 상세 조회 성공",\n            "schema": {\n              "$ref": "#/definitions/PostOutput"\n            }\n          }\n        }\n      },\n      "put": {\n        "summary": "게시글 수정",\n        "description": "특정 게시글을 수정합니다.",\n        "parameters": [\n          {\n            "name": "postId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          },\n          {\n            "name": "post",\n            "in": "body",\n            "required": true,\n            "schema": {\n              "$ref": "#/definitions/PostInput"\n            }\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "게시글 수정 성공",\n            "schema": {\n              "$ref": "#/definitions/PostOutput"\n            }\n          }\n        }\n      },\n      "delete": {\n        "summary": "게시글 삭제",\n        "description": "특정 게시글을 삭제합니다.",\n        "parameters": [\n          {\n            "name": "postId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "게시글 삭제 성공",\n            "schema": {\n              "type": "object",\n              "properties": {\n                "success": {\n                  "type": "boolean"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    "/posts/{postId}/comments": {\n      "post": {\n        "summary": "댓글 작성",\n        "description": "특정 게시글에 댓글을 작성합니다.",\n        "parameters": [\n          {\n            "name": "postId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          },\n          {\n            "name": "comment",\n            "in": "body",\n            "required": true,\n            "schema": {\n              "$ref": "#/definitions/CommentInput"\n            }\n          }\n        ],\n        "responses": {\n          "201": {\n            "description": "댓글 작성 성공",\n            "schema": {\n              "$ref": "#/definitions/CommentOutput"\n            }\n          }\n        }\n      },\n      "get": {\n        "summary": "댓글 목록 조회",\n        "description": "특정 게시글의 댓글 목록을 조회합니다.",\n        "parameters": [\n          {\n            "name": "postId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "댓글 목록 조회 성공",\n            "schema": {\n              "type": "array",\n              "items": {\n                "$ref": "#/definitions/CommentOutput"\n              }\n            }\n          }\n        }\n      }\n    },\n    "/comments/{commentId}": {\n      "put": {\n        "summary": "댓글 수정",\n        "description": "특정 댓글을 수정합니다.",\n        "parameters": [\n          {\n            "name": "commentId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          },\n          {\n            "name": "comment",\n            "in": "body",\n            "required": true,\n            "schema": {\n              "$ref": "#/definitions/CommentInput"\n            }\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "댓글 수정 성공",\n            "schema": {\n              "$ref": "#/definitions/CommentOutput"\n            }\n          }\n        }\n      },\n      "delete": {\n        "summary": "댓글 삭제",\n        "description": "특정 댓글을 삭제합니다.",\n        "parameters": [\n          {\n            "name": "commentId",\n            "in": "path",\n            "required": true,\n            "type": "integer"\n          }\n        ],\n        "responses": {\n          "200": {\n            "description": "댓글 삭제 성공",\n            "schema": {\n              "type": "object",\n              "properties": {\n                "success": {\n                  "type": "boolean"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  "definitions": {\n    "PostInput": {\n      "type": "object",\n      "properties": {\n        "title": {\n          "type": "string"\n        },\n        "content": {\n          "type": "string"\n        }\n      }\n    },\n    "PostOutput": {\n      "type": "object",\n      "properties": {\n        "id": {\n          "type": "integer"\n        },\n        "title": {\n          "type": "string"\n        },\n        "content": {\n          "type": "string"\n        },\n        "author": {\n          "type": "string"\n        },\n        "createdAt": {\n          "type": "string",\n          "format": "date-time"\n        }\n      }\n    },\n    "CommentInput": {\n      "type": "object",\n      "properties": {\n        "content": {\n          "type": "string"\n        }\n      }\n    },\n    "CommentOutput": {\n      "type": "object",\n      "properties": {\n        "id": {\n          "type": "integer"\n        },\n        "content": {\n          "type": "string"\n        },\n        "author": {\n          "type": "string"\n        },\n        "createdAt": {\n          "type": "string",\n          "format": "date-time"\n        }\n      }\n    }\n  }\n}\n```',
      };

      // 1. 불필요한 문자 제거
      const jsonString = apiResponse.api
        .replace(/```json\n|```/g, '') // ```json\n과 ``` 제거
        .replace(/\\n/g, '') // \n 제거
        .trim(); // 앞뒤 공백 제거

      // 2. JSON 파싱
      try {
        const apiJson = JSON.parse(jsonString);

        // 3. Swagger UI에 전달
        SwaggerUIBundle({
          spec: apiJson,
          dom_id: '#swagger-ui',
        });
      } catch (e) {
        console.error('Invalid JSON:', e);
      }
    </script>
  </body>
</html>
